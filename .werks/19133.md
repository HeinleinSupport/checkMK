[//]: # (werk v3)
# OpenTelemetry Integration switches to Metric Backend

key        | value
---------- | ---
date       | 2026-01-21T09:07:11+00:00
version    | 2.6.0b1
class      | feature
edition    | ultimate
component  | wato
level      | 1
compatible | no

With the introduction of the Clickhouse Metric Backend in [#18906](https://checkmk.com/werk/18906), the OpenTelemetry Integration has transitioned from
ingesting data via a file-based backend to using the metric backend. As a result, data previously stored in
`var/check_mk/otel_collector/host_monitoring/` has been migrated into the Clickhouse metric backend.

The OpenTelemetry collector configuration no longer includes host name computation, and the option to generate more
complex host names with fixed prefixes or suffixes has been removed.

When updating a 2.4.0 site that has the experimental OpenTelemetry Integration configured, all incompatible OpenTelemetry
collector configurations, Prometheus scraping configurations, OpenTelemetry Agent Integration Rules, and Dynamic Host
Management connections that used OpenTelemetry data will be deleted. However, hosts created by the Dynamic Host Management
connection will remain intact.

To recreate the OpenTelemetry Integration, please follow these steps:

1. Enable the Metric Backend in the Global Settings of Checkmk under Setup -> General -> Global Settings -> Site
 Management.
2. Set up a new OpenTelemetry Collector configuration under Setup -> Hosts -> OpenTelemetry Collector. Note that host name
 lookup has been moved to the Dynamic Host Management connection and renamed to **Resource attribute for host name lookup**.
3. If you previously used Prometheus scraping, recreate the scraping configuration under Setup -> Hosts -> Prometheus
 Scraping.
4. There is no longer a need to create an OpenTelemetry Agent Integration Rule.
5. Create a new Dynamic Host Management connection under Setup -> Hosts -> Dynamic Host Management, and select
 **OpenTelemetry Data - Metric Backend** as the connector type. The host name lookup formerly found in the OpenTelemetry
 collector configuration is now configured here as Ressource Attribute for host name lookup.
6. Hosts that were created manually and not by the Dynamic Host Management connection must be reconfigured with the new **OpenTelemetry data**
 attribute found in their host configuration.

The Agent Integration Rule under Setup -> Agents -> Other Integrations -> OpenTelemetry has been removed. Hosts with the
**OpenTelemetry data** attribute set in their host configuration will now receive OpenTelemetry data automatically if it is
available.
